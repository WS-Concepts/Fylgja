// Fylgja (https://fylgja.dev)
// Licensed under MIT Open Source

@use "sass:map";
@use "sass:list";
@use "sass:string";

$use-custom-mq: false !default;

$breakpoints: (
	"sm": 480px,
	"md": 768px,
	"lg": 1024px,
	"xl": 1440px,
	"xxl": 2200px,
) !default;

/// @param {string} $prop-name - name used with each breakpoint name
/// @return {string} - stacked list of CSS variables
@function for-mq-prop($prop-name, $use-mq: true) {
	@if not $use-mq {
		@return var(--#{$prop-name});
	}

	$value: "";
	$close: ")";
	$names: map.keys($breakpoints);

	@each $name in $names {
		$value: "var(--#{$name}_#{$prop-name}, " + $value;
		$close: $close + ")";
	}

	$value: $value + "var(--#{$prop-name}#{$close}";

	@return string.unquote($value);
}

/// @param {"min"|"max"|string} $range [min] - direction of the media query or custom syntax
/// @content any value inside will be wrapped in the mq, for classes use it with `for-mq() using ($name)`
/// @output {Mixed} CSS wrapped with each value of the breakpoints
@mixin for-mq($range: "min", $map: $breakpoints) {
	$syntax: if(
		$range == "min",
		"width >",
		if($range == "max", "width <=", $range)
	);

	@each $name, $mq in $map {
		@media ($syntax $mq) {
			@content ($name);
		}
	}
}

/// @param {"min"|"max"} $range [min] - direction of the media query
/// @content any value inside will be wrapped in the mq, for classes use it with `for-mq() using ($name)`
/// @output {Mixed} CSS wrapped with each value of the breakpoints
@mixin for-custom-mq($range: "min", $map: $breakpoints) {
	@each $name, $mq in $map {
		$syntax: if($range == "min", "--#{$name}", "--#{$name}-max");

		@media ($syntax) {
			@content ($name);
		}
	}
}
