// Fylgja (https://fylgja.dev)
// Licensed under MIT Open Source

$text-flow: 1em 1rem !default;
$separator-flow: 2.5em !default;

$h1-size: 3.5rem !default;
$h2-size: 2.5rem !default;
$h3-size: 2rem !default;
$h4-size: 1.5rem !default;
$h5-size: 1.25rem !default;
$h-size: 1.1rem !default;
$h-weight: 700 !default;
$h-line: 1.1 !default;

// Set a general default for text block margin
:where(h1, h2, h3, h4, h5, h6, p, dl, ul, ol, pre, hgroup) {
	margin-block: var(--text-flow, #{$text-flow});
}

:where(blockquote, figure, hr) {
	margin-block: var(--separator-flow, #{$separator-flow});
	margin-inline: 0;
}

// Improved heading text wrapping
:where(h1, h2, h3, h4, h5, h6, legend) {
	font-size: var(--h-size, #{$h-size});
	font-weight: var(--h-weight, $h-weight);
	line-height: var(--h-line, $h-line);
	text-wrap: balance;
}

:where(h1) {
	--h-size: #{$h1-size};
}

:where(h2) {
	--h-size: #{$h2-size};
}

:where(h3) {
	--h-size: #{$h3-size};
}

:where(h4) {
	--h-size: #{$h4-size};
}

:where(h5) {
	--h-size: #{$h5-size};
}

// Prevent orphans in supported browsers
:where(p, li, dd) {
	text-wrap: pretty;
}

// Let links be part of the text by default and inherit the color where needed
:where(:any-link) {
	color: inherit;
	font-weight: 500;
}

:where(blockquote) {
	padding-inline-start: 1.5em;
	border-inline-start: 4px solid;
}

:where(address) {
	font-style: inherit;
}

// Inherit fonts for inputs and buttons
:where(input, button, textarea, select),
:where(input[type="file"])::-webkit-file-upload-button {
	font: inherit;
}

// Remove list styles on ul, ol elements with a list role or inside a nav element,
// The list role presevers the list A11Y: https://developer.mozilla.org/en-US/docs/Web/CSS/list-style#accessibility_concerns
:where(:is(ul, ol)[role="list"], nav :is(ul, ol)) {
	list-style: none;
	margin-block: 0;
	padding-inline-start: 0;
}

// Remove margin on nested lists and nested items inside a hgroup
:where(hgroup > *),
:where(dl, ol, ul) :where(dl, ol, ul) {
	margin-block: 0;
}

:where(dt) {
	font-weight: 500;
}

:where(dd + dt) {
	margin-block-start: 0.5em;
}

:where(dd) {
	margin-inline-start: 0;
}

// Correct the inheritance of color in Firefox
:where(hr) {
	border-block-end-width: 2px;
	color: inherit;
}

// Add the correct font size in all browsers
:where(small) {
	font-size: 0.875em;
}

// Prevent sub and sup elements from affecting the line height in all browsers
:where(sub, sup) {
	position: relative;
	font-size: 0.75em;
	line-height: 0;
	vertical-align: baseline;
}

:where(sub) {
	bottom: -0.25em;
}

:where(sup) {
	top: -0.5em;
}

:where(code, pre, kbd, samp) {
	font-family: var(--family-mono);
}

:where(code, mark, :not(kbd) > kbd) {
	border-radius: 0.2em;
	padding: 0.125rem 0.25rem;
}

:where(code, pre) {
	writing-mode: lr;
	direction: ltr;
}

:where(pre, :not(pre) > code) {
	background: var(--surface-color);
}

:where(:not(kbd) > kbd) {
	border-width: 1px;
}

:where(pre) {
	border-radius: 0.5em;
	padding: 0.875em 1em;
	white-space: pre;
	overflow: auto;
}
