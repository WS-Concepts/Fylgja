// Fylgja (https://fylgja.dev)
// Licensed under MIT Open Source

$size: 1.25em !default;
$border-width: 2px !default;
$radius: 0.35rem !default;

$bg: none !default;
$color: currentcolor !default;

$checkbox-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='4'%3E%3Cpath d='M20 6 9 17l-5-5'/%3E %3C/svg%3E") !default;
$indeterminate-icon: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='4'%3E%3Cpath d='M5 12h14'/%3E%3C/svg%3E") !default;

$disabled-opacity: 0.6 !default;

@mixin base {
	--_gap: var(--icon-gap, 2px);
	appearance: none;
	block-size: var(--size-y, #{$size});
	inline-size: var(--size-x, #{$size});
	border-radius: var(--control-radius, #{$radius});
	border-width: var(--control-border-width, #{$border-width});
	border-color: var(--control-stroke);
	background: var(--control-bg, #{$bg});
	color: var(--control-color, #{$color});
	margin: 0;
	padding: var(--_gap);
	user-select: none;

	&:not(:disabled) {
		cursor: pointer;
	}

	&:focus-visible {
		outline-color: var(--control-stroke, currentcolor);
	}

	&::after {
		content: "";
		display: block;
		block-size: 100%;
		inline-size: 100%;
		border-radius: inherit;
		background-color: var(--icon-color, currentcolor);
		scale: var(--_show-icon, 0);
		opacity: var(--_show-icon, 0);
		transition: translate 0.15s, scale 0.15s, opacity 0.15s;
		forced-color-adjust: none;
		// stylelint-disable-next-line property-no-vendor-prefix
		-webkit-mask: var(--_icon) center / contain no-repeat;
		mask: var(--_icon) center / contain no-repeat;
	}

	&:checked {
		--_show-icon: 1;
		outline-color: var(--control-checked-stroke, var(--root-fg));
		border-color: var(--control-checked-stroke, var(--root-fg));
		background-color: var(--control-checked-bg, var(--root-fg));
		color: var(--control-checked-color, var(--root-bg));
	}
}

$enable-switch: true !default;
$switch-size: ($size + 0.75) !default;

@mixin switch {
	--_show-icon: 1;
	--control-radius: 1.25em;
	--size-x: #{$switch-size};

	&::after {
		inline-size: auto;
		aspect-ratio: 1;
	}

	&:checked {
		--_offset-x: calc(var(--size-x) - var(--size-y, #{$size}));

		&::after {
			translate: var(--_offset-x) 0%;
		}

		&:dir(rtl)::after {
			translate: calc(var(--_offset-x) / -1) 0%;
		}
	}
}
