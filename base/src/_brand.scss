// Fylgja (https://fylgja.dev)
// Licensed under MIT Open Source

// stylelint-disable scss/at-rule-no-unknown, property-no-unknown

@use "buttons/helper" as btn;

$brand: hsl(260 84% 56%) !default;
$on-brand: hsl(260 0% 100%) !default;

:root {
	--brand: #{$brand};
	--on-brand: #{$on-brand};
	--form-active-color: var(--brand);
	--control-checked-stroke: var(--brand);
	--control-checked-bg: var(--brand);
	--control-checked-color: var(--on-brand);
	color-scheme: light dark;
	scrollbar-color: var(--scrollthumb-color, var(--brand))
		var(--scrolltrack-color, transparent);
	accent-color: var(--brand);
	caret-color: var(--brand);
}

@media (prefers-color-scheme: dark) {
	:root {
		--root-bg: color-mix(in oklab, #000 82%, var(--brand));
		--root-fg: #fff;
		--select-icon: var(--chevron-dark-scheme);
	}
}

@view-transition {
	navigation: auto;
}

::marker {
	color: var(--brand);
	font-weight: bolder;
}

::selection {
	text-shadow: none;
	background: var(--brand);
	color: var(--on-brand);
}

:where(:focus-visible) {
	outline-color: var(--brand);
}

:where(blockquote, hr) {
	border-color: var(--brand);
}

:where(tbody tr:nth-child(even) :is(th, td)) {
	background: color-mix(in oklab, var(--root-bg) 94%, currentcolor);
}

// Fixed footer
body {
	display: flex;
	flex-direction: column;

	> main {
		flex-grow: 1;
	}
}

// Forms
::-webkit-calendar-picker-indicator {
	outline-color: var(--brand);
}

:where(select option:checked) {
	background: var(--brand);
	color: var(--on-brand);
}

// Buttons
:where(.btn.-primary, [type="submit"], form button:not([type])),
:where(input[type="file"])::file-selector-button {
	--btn-stroke: transparent;
	--btn-bg: var(--brand);
	--btn-color: var(--on-brand);
	--btn-hover-bg: color-mix(in oklab, var(--brand) 80%, #000);
	--btn-active-bg: color-mix(in oklab, var(--brand) 72%, #000);
}

:where(.btn, button, [type="button"], [type="submit"], [type="reset"]) {
	&:has(:where(svg:only-child, img:only-child)) {
		--btn-px: var(--btn-py, #{btn.$padding-block});
	}
}

// prettier-ignore
:where(
	form .field,
	:is(form, fieldset) > label:has(input, select, textarea, progress, meter)
) {
	margin-block-start: 0.875rem;
}

// Dialogs
:where(dialog) {
	&.from-top {
		--ty: -100%;
		--tx: 0;
	}

	&.from-bottom {
		--ty: 100%;
		--tx: 0;
	}

	&.from-start {
		--ty: 0;
		--tx: -100%;
	}

	&.from-end {
		--ty: 0;
		--tx: 100%;
	}

	&.offcanvas {
		&:not(.from-top, .from-bottom) {
			--max-size-y: 100%;
			block-size: 100%;
			inline-size: min(100%, 25rem);
		}

		&.from-top,
		&.from-bottom {
			--max-size-x: 100%;
			block-size: min(100%, 25rem);
			inline-size: 100%;
		}

		&:not(.from-top, .from-bottom, .from-end) {
			--ty: 0;
			--tx: -100%;
			margin-inline-start: 0;
			border-start-start-radius: 0;
			border-end-start-radius: 0;
		}

		&.from-top {
			margin-block-start: 0;
			border-start-start-radius: 0;
			border-start-end-radius: 0;
		}

		&.from-bottom {
			margin-block-end: 0;
			border-end-end-radius: 0;
			border-end-start-radius: 0;
		}

		&.from-end {
			margin-inline-end: 0;
			border-start-end-radius: 0;
			border-end-end-radius: 0;
		}
	}
}
